(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{8295:function(e,o,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[roomId]",function(){return l(4707)}])},4707:function(e,o,l){"use strict";l.r(o);var t=l(5893),a=l(8583),n=l(1163),r=l(7294),_=l(6221),c=l(9854),s=l(3483),i=l(6819),d=l(6303),h=l.n(d);o.default=()=>{let[e]=(0,a.KO)(_.L),o=(0,n.useRouter)(),{roomId:l}=o.query,[d,f]=(0,r.useState)(),fetchRoom=async()=>{let e=await s.x.rooms.$get().catch(i.F);e&&e.forEach(e=>{e.id===l&&f(e)})},leaveRoom=async()=>{if(!d)return;let e=await s.x.rooms.$patch({body:{roomId:d.id}}).catch(i.F);null!==e&&o.push("/")},clickCell=async(e,o)=>{await s.x.rooms.board.$post({body:{x:e,y:o}}),await fetchRoom()};return((0,r.useEffect)(()=>{let e=setInterval(fetchRoom,1e3);return()=>clearInterval(e)}),d&&e)?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:h().gameScreen,children:[(0,t.jsx)("button",{onClick:leaveRoom,className:h().leaveButton,children:"部屋を出る"}),(0,t.jsxs)("div",{className:h().gameInfo,children:[(0,t.jsxs)("div",{className:"".concat(h().playerInfo," ").concat(h().playerSelf," ").concat(h().playerLeft),children:["自分: ",e.id]}),(0,t.jsx)("div",{className:h().boardContainer,children:(0,t.jsx)("div",{className:h().board,children:d.board.map((e,o)=>e.map((e,l)=>(0,t.jsx)("div",{className:h().cell,onClick:()=>clickCell(l,o),children:0!==e&&(0,t.jsx)("div",{className:h().stone,style:{background:1===e?"#000":2===e?"#fff":"#ff0"}})},"".concat(l,"-").concat(o))))})}),d.userOnRooms.filter(o=>null===o.out&&o.firebaseId!==e.id).map(e=>(0,t.jsxs)("div",{className:"".concat(h().playerInfo," ").concat(h().playerOpponent," ").concat(h().playerRight),children:["相手: ",e.firebaseId]},e.firebaseId))]})]})}):(0,t.jsx)(c.g,{visible:!0})}},6303:function(e){e.exports={container:"othello_container__EH3nh",main:"othello_main__UdmT8",footer:"othello_footer__X99rz",title:"othello_title__JbmI8",description:"othello_description__sQQ4C",code:"othello_code__d8YDI",grid:"othello_grid__g6oYB",card:"othello_card__JrL8E",logo:"othello_logo__Cm3Wy",board:"othello_board__Q1q7Y",cell:"othello_cell__Biu_Q",stone:"othello_stone__H9K0Y",leaveButton:"othello_leaveButton__oQxqP",gameScreen:"othello_gameScreen__C8vP2",gameInfo:"othello_gameInfo__k9yvt",playerInfo:"othello_playerInfo__sBXaS",playerSelf:"othello_playerSelf__CzNSi",playerOpponent:"othello_playerOpponent__sGG_T",boardContainer:"othello_boardContainer__amWol",playerLeft:"othello_playerLeft__Vf2fp",playerRight:"othello_playerRight__PfxOm",userInfo:"othello_userInfo__VZPiB",userSelf:"othello_userSelf__RFve4",userOpponent:"othello_userOpponent__U9rxd"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8295)}),_N_E=e.O()}]);